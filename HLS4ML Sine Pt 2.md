# Exporting IP
- By setting the `export` parameter of hls4ml's build function to true, a vivado IP will be packaged and exported
- After running this, the python script generated a vivado IP block that looked like this
	- ![[Pasted image 20250716170551.png]]
- This is not an AXI peripheral. I've only ever used AXI peripherals and I don't want to learn how to use this new interface
# Getting an AXI Interface
- Analyzing the C++ file generated by hls4ml shows that it's creating an IP core that uses the port level control interface
```c++
void sin_vitis(
	input_t input_1[N_INPUT_1_1],
	result_t layer6_out[N_LAYER_6]
) {

// hls-fpga-machine-learning insert IO
#pragma HLS ARRAY_RESHAPE variable=input_1 complete dim=0
#pragma HLS ARRAY_PARTITION variable=layer6_out complete dim=0
#pragma HLS INTERFACE ap_vld port=input_1,layer6_out

#pragma HLS PIPELINE
```
- To get an AXI interface I changed the pragmas to use an AXI control interface and reran the build function in python
	- I commented out the compile function because this recompiles the entire project and overwrites the changes I made to the C++ file
```c++
void sin_vitis(
	input_t input_1[N_INPUT_1_1],
	result_t layer6_out[N_LAYER_6]

) {

// hls-fpga-machine-learning insert IO

#pragma HLS ARRAY_RESHAPE variable=input_1 complete dim=0
#pragma HLS ARRAY_PARTITION variable=layer6_out complete dim=0

#pragma HLS INTERFACE s_axilite port=return bundle=control
#pragma HLS INTERFACE s_axilite port=input_1 bundle=control
#pragma HLS INTERFACE s_axilite port=layer6_out bundle=control
#pragma HLS PIPELINE
```
- However this generated an IP that had both port-level control and AXI control
	- ![[Pasted image 20250716170045.png]]
	- It also gave me a warning that using the pipeline pragma with the axilite interface could lead to incorrect results due to FIFO buffer sizing, so I removed the pipeline pragma. I hope this doesn't cause issues later...
- What I did to fix the problem of having both port-level and AXI control was delete the folder containing all the HDL before rerunning the build function
- This generated a correct-looking IP block which I placed into a block design![[Pasted image 20250716170349.png]]
# Next Steps
- Write platform code in Vitis and test on the Z2